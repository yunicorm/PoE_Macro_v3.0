# PoE Universal Macro 開発計画書 v2.4

## 1. プロジェクト概要

### 1.1 現在の状況（2025年1月）
- **現行バージョン**: v2.4
- **実装済み機能**: GUI設定画面、プロファイル管理
- **対象ビルド**: Champion Volcanic Fissure（固定）
- **次期目標**: v3.0（汎用マクロシステム）

### 1.2 開発ロードマップ
```
v2.3 (完了) → v2.4 (現在) → v2.5 → v2.6 → v3.0 (目標)
特定ビルド     GUI追加      チェーン   条件実行   汎用システム
```

## 2. 完了した開発（v2.4）

### 2.1 実装内容
- ✅ GUI設定画面（4タブ構成）
- ✅ プロファイル管理システム
- ✅ JSON形式での設定保存/読み込み
- ✅ 設定の視覚的変更機能
- ✅ リアルタイム適用機能

### 2.2 技術的成果
- モジュール構造の維持
- 後方互換性の確保
- エラーハンドリングの改善
- 文字化け問題の解決

## 3. 短期開発計画（v2.5 - 3ヶ月）

### 3.1 ビジュアルチェーンビルダー
**目標**: GUIでスキルチェーンを視覚的に作成

**機能要件**:
- ドラッグ&ドロップによるチェーン作成
- タイムライン表示
- 実行順序の視覚化
- チェーンのテンプレート機能

**技術要件**:
- カスタムGUIコントロール
- アニメーション対応
- チェーンデータのJSON保存

### 3.2 チェーン実行エンジン
**目標**: 作成したチェーンを実際に実行

**機能要件**:
- 複数チェーンの並列実行
- 条件分岐（HP/マナ閾値）
- ループ制御
- 優先度管理

**実装タスク**:
1. チェーン解析エンジン
2. 実行スケジューラー
3. 競合検出システム
4. デバッグモード

## 4. 中期開発計画（v2.6 - 6ヶ月）

### 4.1 条件付き実行システム
**目標**: 状況に応じた自動判断

**条件タイプ**:
- リソース条件（HP/マナ/ES）
- バフ/デバフ状態
- 移動/静止状態
- チャージ数

**実装方法**:
- 条件エディタGUI
- リアルタイム状態監視
- 条件の組み合わせ（AND/OR）

### 4.2 優先度管理システム
**目標**: スキル使用の最適化

**機能**:
- スキル間の優先順位設定
- 動的優先度変更
- キャストタイム保護
- インタラプト制御

## 5. 長期開発計画（v3.0 - 12ヶ月）

### 5.1 汎用ビルド対応
**目標**: あらゆるビルドに対応可能なシステム

**実装内容**:
- ビルドテンプレート
- スキルデータベース
- 自動最適化提案
- カスタムビルド作成

### 5.2 高度な機能
**Path of Building連携**:
- ビルドインポート
- スキル情報の自動取得
- 最適なローテーション提案

**コミュニティ機能**:
- プロファイル共有
- レーティングシステム
- コメント機能

**AI アシスタント**:
- 使用パターン学習
- 最適化提案
- 異常検知

## 6. 技術的課題と解決策

### 6.1 現在の課題
| 課題 | 影響 | 解決策 |
|------|------|--------|
| ハードコーディング | 拡張性低下 | 段階的な抽象化 |
| GUI複雑性 | 保守困難 | コンポーネント化 |
| パフォーマンス | 遅延発生 | 最適化とキャッシュ |

### 6.2 技術的アプローチ
1. **段階的リファクタリング**: 既存機能を維持しながら改善
2. **テスト駆動開発**: 各フェーズでテストを追加
3. **ドキュメント優先**: 仕様を明確化してから実装

## 7. 開発スケジュール

### 7.1 マイルストーン
| 時期 | バージョン | 主要機能 |
|------|-----------|----------|
| 完了 | v2.4 | GUI設定画面 |
| 3ヶ月後 | v2.5 | チェーンビルダー |
| 6ヶ月後 | v2.6 | 条件付き実行 |
| 9ヶ月後 | v2.7 | 優先度管理 |
| 12ヶ月後 | v3.0 | 汎用システム |

### 7.2 リソース要件
- **開発時間**: 週10-15時間
- **テスト環境**: 複数のビルドでの検証
- **外部ライブラリ**: 追加予定なし

## 8. リスク管理

### 8.1 技術的リスク
- **AutoHotkey制限**: 一部の高度な機能が実装困難
- **ゲームアップデート**: 仕様変更への対応
- **パフォーマンス**: 複雑化による処理遅延

### 8.2 対策
- 代替実装の検討
- モジュール化による影響範囲の限定
- 継続的なパフォーマンステスト

## 9. 成功指標

### 9.1 短期指標（v2.5）
- チェーン作成時間: 5分以内
- 実行精度: 95%以上
- ユーザビリティ: 直感的操作

### 9.2 長期指標（v3.0）
- 対応ビルド数: 50以上
- コミュニティ利用者: 1000人以上
- 平均設定時間: 10分以内

## 10. 次のアクション

### 10.1 v2.5開発準備
1. チェーンビルダーのUI設計
2. プロトタイプ作成
3. ユーザーフィードバック収集

### 10.2 技術調査
1. ドラッグ&ドロップ実装方法
2. カスタムコントロール作成
3. アニメーション技術

### 10.3 ドキュメント整備
1. API仕様書作成
2. 開発ガイドライン更新
3. テスト計画書作成

---

**最終更新日**: 2025年1月20日  
**計画書バージョン**: 2.4

## 付録: v2.4実装の振り返り

### 成功点
- モジュール構造を維持したままGUI追加
- 直感的なインターフェース
- 安定した動作

### 改善点
- エラーハンドリングの強化
- より詳細なバリデーション
- パフォーマンスの最適化

### 学んだこと
- 段階的な機能追加の重要性
- ユーザビリティの優先
- 後方互換性の維持方法